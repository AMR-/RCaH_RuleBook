\section{Following \& Guiding}

The robot must follow a person out of the arena and through unknown, dynamic, and crowded regions of the venue. 
After reaching the destination, the robot must guide the person back to the arena.

\subsection{Goal}
The goal of this test is mostly an audience outreach, in the tradition of the RoboZoo test series in the previous years. 
Spectators can take (flash photography) pictures of the robots up close and maybe even interact with the robot themselves.
This is achieved by taking the robots out of the arena, into the RoboCup venue and performing in that dynamic environment. 

\subsection{Focus}
This test focuses on tracking, recognizing, following and guiding a previously unknown person as well as safe navigation in dynamic environments.

\subsection{Setup}

\begin{enumerate}
\item \textbf{Doors:} All doors in the apartment are open.
\item \textbf{Location:} The test starts and ends in one of the arenas (apartment). During the test, the robots have to safely operate outside the arena in a public space.
\item \textbf{Operator:} An operator is selected by the \TC to test the robot during the following and guiding phases.
\item \textbf{Other people:} There are no restrictions on other people walking by or standing around throughout the complete task.
\item \textbf{Path:} A path is setup but not announced beforehand. 
The path includes check points and a destination location.
\item \textbf{Disturbances:} The path includes defined disturbances during following and guiding (not announced before the test).
In addition, this test will take place in the RoboCup venue where some unpredicted disturbances will manifest themselves. 
\end{enumerate}

\subsection{Task}

\begin{enumerate}
\item \textbf{Initialization:} The robot starts at a predefined \emph{starting location}. 
  The designated \textit{operator} will step in front of the robot and tell the robot to start. 
\item \textbf{Training phase \& operator instructions:} The robot must memorize the \textit{operator} and follow the \emph{operator} to a designated \emph{goal location} outside the arena. 
  Neither the path taken nor the goal location are announced beforehand.
  During the training phase, the robot may instruct the operator to follow a certain setup procedure and what to do when the robot stops following (or ask for help).
\item \textbf{Following phase:} When the robot signals that it is ready to start following, the operator starts walking---in a natural way---along the designated path. 
  The robot needs to follow the operator until the operator asks the robot to stop doing so, at the \textit{goal location} or some intermediate location chosen by the operator.
  It could be that the operator has to stop walking for some reason. When the operator continues, the robot should continue to follow as well. 
  The robot can ask for confirmation on whether to continue following or start the next phase. 
\item \textbf{Guiding phase:} Upon reaching the \textit{goal location}, the \textit{operator} will command the robot to stop following and to start guiding the \emph{operator} back to the arena.
  This may be a single command and can be specified by the team and included in the operator instructions in the training phase.
  When the robot signals that it is ready to start guiding, the operator starts walking---in a natural way---following the robot and its instructions.
  If the robot is unable to guide a human, it may go back to the \textit{starting location} without an operator. 
\item \textbf{End of the test:} Once back at \textit{starting location}, the robot has to announce that it is back in the arena. 
  After the announcement, the robot has to leave through the exit door.
\end{enumerate}

\paragraph*{Remarks:}
\begin{enumerate}
\item The waypoints and the goal location are reached once the robot passes a marker.
\item The starting location (guiding phase) is reached once the robot is back in the arena.
\end{enumerate}

\subsection{Obstacles and Disturbances}
During following and guiding, some \emph{disturbances} will occur. 
Disturbances may include:
\begin{compactitem}
\item A person crosses in between operator and robot (following and guiding), 
\item The operator disappears behind a group of people (following),
\item The operator becomes slower (guiding),
\item The operator stops following,
\item Audience taking pictures of the robot and its operator,
\end{compactitem}
In case of disturbances it is expected that the robot continues following or guiding the operator and to find the operator again in case the operator got out of sight.

\subsection{Additional rules and remarks}
\begin{enumerate}
\item \textbf{Safety}: Robots must not touch people and operate safely! 
  The \TC may stop the robot and the test at any time in case the robot is not longer safely operating or shows problems with continuing the test (e.g., loosing the operator or moving randomly).
  The robots are accompanied by referees, \OC members, or \TC members at all times.
  At least one \TC member is always in sight to stop the robot (or tell others to do so).
\item \textbf{Asking people to move away:} If the robot finds on its way a person blocking its path, it may \textit{gently} ask that person to move away and wait for the path to be clear. 
  This is prefered over robots waiting indefinitely while standing still. 
\item \textbf{Instructions:} The robot interacts with the operator, \emph{not} the team. 
  That is, the team is not allowed to instruct the follower.
\item \textbf{Natural walking:} The operator has to walk \quotes{naturally}, i.e., move forward facing forward. 
  The operator is not allowed during the following phase to walk back, stand still, signal the robot or follow any re-calibration procedure.
  During the guiding, the operator follows with constant pace besides the defined disturbances. 
  The operator is not allowed to move faster to catch up with the robot. 
\item \textbf{Going back home early: } If the robot is not able to follow or guide the operator all the way to the goal or starting location and looses the operator before that, it may drive back to the starting location alone.
  The robot must announce it lost the operator and that it will drive back. 
  The robot can only score points for going back before a waypoint after it passed the waypoint after that. 
  E.g. if the robot looses the operator shortly after waypoint 3, it cannot score points for waypoint 3 (which it was already close to), only for waypoints 2, 1 and the starting location.
\item \textbf{Going back to known position: } If the robot lost the operator during following or guiding, it may go back to a previous position where it still had the operator. 
  It must announce that it is doing so, as to not confuse the referees between this case and the case ``Going back early''. 
\end{enumerate}

\subsection{Data recording}
Please record the following data (See \refsec{rule:datarecording}):
\begin{itemize}
\item Mapping data
\item Trajectories and planned paths
\end{itemize}


\subsection{TC \& OC instructions}

\textbf{2 hours before the test}
\begin{itemize}
\item Define the path, locations and check points (same for all teams).
\item Define the types and locations of disturbances (same for all teams).
\item Announce the \emph{starting locations} for the teams.
\end{itemize}

\newpage

\subsection{Score sheet}
\input{scoresheets/following_guiding.tex}

% Local Variables:
% TeX-master: "Rulebook"
% End:
