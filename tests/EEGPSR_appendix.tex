\chapter[EEGPSR in detail]{E\textsuperscript{2}GPSR in detail.}
\label{chap:eegpsr-appendix}

\section{Focus explained}
\label{sec:eegpsr-focus-details}
This test particularly focuses on the following aspects:
\begin{itemize}
	\item No predefined order of actions to carry out (to get away from state machine-like behavior programming).

	\item Increased complexity in speech recognition (possible commands are less restricted in both actions/operators and arguments/objects, and can include multiple targets, e.g., \quotes{put \textbf{an apple, a banana, and the milk} on the kitchen table} or \quotes{Ask \textbf{Mary} in the kitchen where is \textbf{John}}).

	\item More advanced capabilities (e.g. pose and activity detection, unknown object description, door opening, pouring, manipulating a tray, following people in crowded environments etc.).

	\item Environmental (high-level) reasoning, including:
	  \begin{itemize}
		\item Memory (robot should be able to remember performed actions and their effects).
		\item Awareness (unexpected events may occur while the robot is waiting for a command).
	  \end{itemize}

  \item Robust long-term operation.

\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Categories explained
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Categories explained}
\label{sec:eegpsr-categories-explained}
This section explain each of the categories of the test and provides examples on how the abilities are scored.

It is important to remark that there is no script or predefined way to solve the tasks, being most of them of ambiguous nature. It is up to the team to choose how to solve each tasks according with robot capabilities and skills. For instance, consider that the robot is asked to \textbi{serve breakfast}. A simple approach might be to pick up and deliver a single object in the \textit{food} category (scoring for grasp and place only). A more complex approach would be to ask the operator how breakfast must be served, navigating to the kitchen, pouring cereal into a bowl, put the bowl, a fruit and some milk on a tray, and deliver the tray to the operator himself right after closing the kitchen's door (scoring for requesting additional information, grasping, placing, pouring, two-hand transporting, operating a door, and performing natural handover).

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Category I explained
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Category I: Advanced Manipulation}
\label{sec:eegpsr-categoryI-explained}
Advanced Manipulation involves two-hand manipulation, eye-hand coordination, and operating knobs, handles, buttons, etc. Most of these tasks require a closed control loop between what the robot sees and its manipulators.

Some advanced manipulation examples are:
\begin{itemize}
	\item Arranging cutlery.
	\item Opening a bottle (twist, uncap, etc.).
	\item Opening a door.
	\item Placing objects inside a box.
	\item Pouring cereal in a bowl.
	\item Transporting a tray.
\end{itemize}

\textbf{Remark:} Teams are allowed (and encouraged) to demonstrate the robot's manipulation skills during this test by performing tasks not mentioned on the rulebook. Such demonstrations, when successfully executed, will be evaluated and scored proportionally by the TC. Please inform a member of such abilities the Technical Committee in advance.

\subsubsection{Category I command examples}
Below, examples of commands involving advanced manipulation are shown:
\begin{itemize}
	\item Bring me something for breakfast.
	\item Bring me some oat, banana and milk in a tray.
	\item Open the entrance door.
	\item Put all the beverages in the dinner table.
	\item Pour the flakes into the bowl and bring it to me.
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Category II explained
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Category II: Advanced Object Recognition}
\label{sec:eegpsr-categoryII-explained}
Advanced Object Recognition involves affordance/feature detection and classification, untrained object recognition, and far-distance recognition. Feature detection for description and detection may involve color, shape, relative size, relative position, and special characteristics of the object such as text, logos, patterns, etc.

Some advanced object recognition examples are:
\begin{itemize}
	\item Counting objects.
	\item Describing unknown objects.
	\item Finding object from far distance.
	\item Finding objects from a description.
	\item Infer object's class (category) from features.
	\item Object detection and recognition of occluded or hidden objects (behind of, inside of, etc.).
\end{itemize}

\subsubsection{Category II command examples}
Below, examples of commands involving advanced object recognition are shown:
\begin{itemize}
	\item Bring me the biggest pill bottle from the kitchen counter.
	\item Bring me the bookcase's right-most object.
	\item Describe the objects on the drawer to me.
	\item Tell me how many red apples are in the basket on the kitchen table.
	\item Count the snacks in the shelf and tell me how many there are.
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Category III explained
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Category III: HRI \& Incomplete Information}
\label{sec:eegpsr-categoryIII-explained}
This category focuses in commands not including all required information necessary to accomplish the task, making necessary for the robot to interact with the operator.

\begin{itemize}
	\item \textbf{Retrieving missing information:} The robot can ask questions to retrieve the missing information about the task. In the questions, the robot has to make clear what it has already understood and precisely which information is asking for. It is important to remark that several questions may be necessary to fill the gaps in a command.

	\item \textbf{Bypassing ASR:} This category depends heavily in establishing a natural dialog between the robot and the operator, for this reason is highly advised to change of category instead of using the CONTINUE rule \refsec{rule:asrcontinue}.

	\item \textbf{Commands difficulty:} Although incomplete, commands involve solving \textbf{simple tasks} such as Manipulation, Object Recognition, and Person Recognition.

\end{itemize}

\textbf{Remark:} Robots may also attempt to solve the command on their own without asking for additional information. For instance, if the operator asks for a beverage but not stating which, the robot may proceed to search for a random drink from the drinks location.

\subsubsection{Category III command examples}
Below, examples of commands involving HRI \& Incomplete Information are shown:

\paragraph{Example Scenario 1}
The robot is asked to \textit{Follow Elizabeth and tell the time}. Robot may:
\begin{itemize}
	\item Ask where is Elizabeth and execute the command.
	\item Look for Elizabeth and, once she has been found, follow her for later telling the time.
\end{itemize}

\paragraph{Example Scenario 2}
The robot is asked to \textit{Offer a drink to Ana}. Robot may:
\begin{itemize}
	\item Ask where is Ana, go there, ask Ana which drink does she want, and deliver it.
	\item Ask where is Ana and which drink must be delivered.
	\item Ask where is Ana, fetch a random drink and deliver it.
	\item Find a random drink and start looking for Ana.
\end{itemize}

\paragraph{Example Scenario 3}
The robot is asked to \textit{Guide James to the table}. Robot may:
\begin{itemize}
	\item Ask where is James, to which table should the robot guide him, and execute the command.
	\item Ask where is James, go there, and guide him to the dinner table.
	\item Look for James and, once he has been found, guide him to the dinner table.
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Category IV explained
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Category IV: Memory and Awareness}
\label{sec:eegpsr-categoryIV-explained}
Memory refers to the robot's ability to remember previous executed tasks and its effects. Directly related with memory, Awareness requires the robot to be aware of changes in the environment as consequence of its actions, as well as being able to detect unexpected events either while idle or during the execution of a task.

\textbf{Memory and questions on past commands:} Unlike other categories, this category cannot be chosen by a team until a command from another category has been (partially) executed. It is up to the referees to decide when a robot is eligible for solving this category. After the first command has been (partially) accomplished, the operator may ask the robot to provide information about its actions and the environment.

Some Memory and Awareness examples are:
\begin{itemize}
	\item Answering questions about the environment status and changes.
	\item Approaching a calling (shouting, waving, etc.) operator while idle.
	\item Detecting the operators fell while guiding the robot.
	\item Detecting the requested object is taken by another person while grasping.
	\item Noticing a door has been shut.
	\item Noticing the operator is not at the designated position.
	\item Noticing a sleeping person wakes up.
\end{itemize}

\textbf{Remark:} Teams are allowed (and encouraged) to demonstrate the robot's XXXXX skills during this test by performing tasks not mentioned on the rulebook. Such demonstrations, when successfully executed, will be evaluated and scored proportionally by the Technical Committee. Please inform a member of such abilities the Technical Committee in advance.

\subsubsection{Category IV command examples}
Below, example scenarios involving Memory and Awareness are shown:

\paragraph{Example Scenario 1}
Consider that the robot just delivered the newspaper to John in the living room, possible commands may include:

\begin{itemize}
	\item Go to the \textit{dinner table}, find \textit{Anna} and tell her who has the newspaper.
	\item Go to the \textit{coach}, find \textit{James} and answer a \textit{question}.
	\begin{itemize} 
		\item[\textbf{Q:}] The question may be \quotes{where is the newspaper?}
		\item[\textbf{A:}] A valid answer is \quotes{The newspaper is in the living room}.
		\item[\textbf{A:}] Another valid answer is \quotes{I gave it to John in the living room}.
	\end{itemize}
\end{itemize}

\paragraph{Example Scenario 2}
The robot has been asked to \textit{Go with the waving person in the dinning room and ask for their name}, which is \textit{Jessica}. Possible commands may include:

\begin{itemize}
	\item Bring an \textit{apple} to \textit{Jessica}.
	\item Go to the \textit{coach}, find \textit{James} and answer a \textit{question}.
	\begin{itemize} 
		\item[\textbf{Q:}] The question may be \quotes{where is Jessica?}
		\item[\textbf{A:}] A valid answer is \quotes{Jessica is in the dinning room}.
	\end{itemize}
\end{itemize}

\paragraph{Example Scenario 3}
The robot has been asked to \textit{Take the biggest flask from the shelf and put it on the kitchen table}. Possible commands may include:

\begin{itemize}
	\item Bring me the flask.
	\item Find John standing next to the \textit{lamp} and answer a \textit{question}.
	\begin{itemize} 
		\item[\textbf{Q:}] The question may be \quotes{How many objects there are in the shelf?} (Assume there were 4 before the robot took one).
		\item[\textbf{A:}] A valid answer is \quotes{There are 3 objects in the shelf}.
	\end{itemize}
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Category IV explained
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Category V: People Recognition and Navigation}
\label{sec:eegpsr-categoryV-explained}
This category focuses mostly in People Recognition, but considering that guiding and following people involves navigation skills, this ability is also considered. People Recognition involves detecting, remembering, and recognizing people and their characteristics such as gender, age, clothing, size, pose, gestures and activities.

Some People Recognition examples are:
\begin{itemize}
	\item Counting people in a crowd.
	\item Counting people in a crowd with an specific pose, gender, age, etc.
	\item Detecting people pose and gestures.
	\item Finding and recognizing people from far distance.
	\item Finding people matching a description (tallest, sitting, wearing specific color, etc.).
	\item Detecting and recognizing occluded people (behind of, wearing sun glasses, etc.).
	\item Remembering and later recognizing new people.
\end{itemize}

\textbf{Remark:} Teams are allowed (and encouraged) to demonstrate the robot's People Recognition skills during this test by performing tasks not mentioned on the rulebook. Such demonstrations, when successfully executed, will be evaluated and scored proportionally by the Technical Committee. Please inform a member of such abilities the Technical Committee in advance.

\subsubsection{Category V command examples}
Below, examples of commands involving People Recognition are shown:
\begin{itemize}
	\item Bring a coke to the person with black T-shirt in the couch.
	\item Go to the living room and follow the waving person.
	\item Offer something to drink to all the girls in the living room.
	\item Tell me how many girls are in the living room.
	\item Tell me how many standing men are in the dinning room.
\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Category IV explained
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Category VI: Mastering simple skills}
\label{sec:eegpsr-categoryVI-explained}
This category, instead of requiring advanced skills, requires mastering the simple ones, for simple task must be solved as quick as possible. In this category, speed is the key.

\subsubsection{Category VI command examples}
Below, examples of commands involving XXXX are shown:
\begin{itemize}
	\item Look for Jennifer in the couch and tell her how many apples are in the kitchen counter.
	\item Find James in the living room, tell the time, and guide him to the Exit.
	\item Put the chips on the dinner table, go to the entrance, and guide Samantha to the dinning room.
	\item Take the milk, look for a person in the corridor and answer a question.
	\item Grasp the coke from the shelf, bring it to the kitchen table, and follow the person in front of you.
	\item Get the coke from the dinner table and deliver it to Luis at the bathroom.
\end{itemize}

















% \section{Commands in detail}
% \label{sec:eegpsr-commands-details}







% \subsection{Tested abilities \& scoring}
% \label{sec:eegpsr-abilities}
% Each commanded action involves at least one of the following abilities. During the test, all the abilities listed are evaluated. Completing a command within time 

% The following

% \begin{itemize}
% 	\item Advanced manipulation (pouring, placing in a box, transporting a tray, etc.).
% 	\item Awareness (see \refsec{sec:eegpsr-awarenes}).
% 	\item Complex command understanding (natural language).
% 	\item Count people / objects in a given location.
% 	\item Feature recognition (color, gender, gesture, pose, size, etc.).
% 	\item Gesture recognition.
% 	\item Object grasping.
% 	\item Object placing.
% 	\item Object recognition.
% 	\item People finding / learning / recognizing.
% 	\item People following / guiding.
% 	\item Speech recognition.
% 	\item Memory and answering questions.
% \end{itemize}


% The team may choose to be evaluated in the following abilities (one try only):
% \begin{itemize}
% 	\item Activity detection (waking up, reading, dancing, etc.).
% 	\item Natural handover (take / give).
% 	\item Open a door/drawer.
% 	\item Unknown object description / recognition.
% \end{itemize}

% \subsection{Awareness}
% \label{sec:eegpsr-awarenes}
% Either, while the robot is executing a task or while the robot is waiting for a command, an \textit{unexpected} event may occur, having the robot to \textbf{properly identify it} and react to it.

% These \textit{unexpected} events will only occur within the field of view of the robot, and include:
% \begin{itemize}
% 	\item \textbf{Waving:} The operator waves to the robot expecting the robot to approach to them, prior to give a command.
% 	\item \textbf{Falling down:} The person being followed by the robot suddenly falls down, robot must offer assistance.
% 	\item \textbf{Walking away:} One of the people in the crowd being counted suddenly leaves the room. \\ \textbf{Remark: in this case the people count reported by the robot will be valid for both: including and excluding the person who left.}
% 	\item \textbf{Door shutting:} A door is suddenly shut while the robot is on its way to it.
% \end{itemize}

% \paragraph*{Remark:} for security concerns, team must notify the referees when the robot lacks of awareness.

% The following section presents detailed examples and descriptions of the skills to be evaluated during the \textit{EEGPSR} test (see \refsec{sec:eegpsr}). Keep in mind that this is provided only as a guideline to illustrate what teams can expect from the test, but it sets no constrains on how the test will be addressed.

% \section{Ability examples}
% \begin{itemize}
% 	\item \textbf{Advanced manipulation:} The ability of manipulating objects with \textit{two hands} or that require precision and coordination.

% 	\begin{itemize}
% 		\item Open a bottle (twist, uncap, etc.).
% 		\item Pouring cereal in a bowl.
% 		\item Placing objects inside a box
% 		\item Transporting a tray.
% 	\end{itemize}

% 	\item \textbf{Activity detection:} The ability of detecting human activities is evaluated. This may be needed by the robot to accomplish a given task (e.g. detecting wake up after trying to wake someone up) or triggered by an unexpected event, e.g. when a person faints suddenly. 
% 	\begin{itemize}
% 		\item A dormant person wakes up.
% 		\item Someone is reading a book.
% 	\end{itemize}

% 	\item \textbf{Awareness (see \refsec{sec:eegpsr-awarenes}):} The ability of detecting \textit{unexpected} events and reacting accordingly.
% 	\begin{itemize}
% 		\item A door on the robot's path is shut.
% 		\item The operator calls the robot by waving.
% 		\item The person being followed by the robot faints.
% 		\item The person being looked for is sitting on the couch.
% 		\item The person being looked for is found lying on the floor.
% 		\item Someone stands up in front of the robot blocking its path.
% 		\item Someone enters the room and sits down or stands up and walks away while the robot is counting people in a room.
% 	\end{itemize}

% 	\item \textbf{Collision-free navigation:} The ability of navigating safely without colliding (even slightly) with the environment. This ability is not commanded, in the sense that the robot is not asked to avoid collisions, but evaluated by the referees while the robot is moving.
% 	\begin{itemize}
% 		\item Following a person.
% 		\item Guiding a person.
% 		\item Navigating to...
% 	\end{itemize}

% 	\item \textbf{Complex command understanding:} The ability of understanding complex commands at the first attempt and asking as few questions as possible. For instance the commands 
% 		\quotes{\textit{bring me the chips from the kitchen table}} and
% 		\quotes{\textit{go to the kitchen table, take the chips, and bring them to me}}
% 	are equivalent, but the second representation is more complex. \\

% 	\item \textbf{Count:} The ability of counting people and objects that are located close to each other in a given location.
% 	\begin{itemize}
% 		\item Count the snacks in the shelf.
% 		\item Count the red apples in the basket.
% 		\item Count the people in the entrance hall.
% 		\item Count the girls waving in the living room.
% 	\end{itemize}

% 	\item \textbf{Feature recognition:} The ability of properly identifying and describing relevant features in people and objects; as well as finding or interacting with objects or people with the given characteristics.
% 	\begin{itemize}
% 		\item Bring me the biggest pill bottle.
% 		\item Count the red apples in the basket.
% 		\item Describe the objects on the drawer.
% 		\item Ask the standing person to take a seat.
% 		\item Offer something to drink to all the girls in the living room.
% 	\end{itemize}

% 	\item \textbf{Gesture recognition:} the ability of identify and recognize static and dynamic gestures such as pointing or waving.

% 	\item \textbf{Natural handover:} The ability of taking and placing objects from/into other people's hands.
% 	\begin{itemize}
% 		\item Take an item from a human using a natural handover.
% 		\item Give an item to a human using a natural handover.
% 	\end{itemize}

% 	\item \textbf{Object grasping:} Grasping any object (and successfully lifting it up to at least 5 cm for more than 10 seconds). \\

% 	\item \textbf{Object placing:} Placing any object (safely and the objects stands still for more than 10 seconds). \\

% 	\item \textbf{Object recognition:} Properly naming an object or object category. \\

% 	\item \textbf{Open a door/drawer:} The ability of opening doors either for transit or those of furniture.

% 	\item \textbf{People finding / learning / recognizing:} The ability of find people and recognize known people.
% 	\begin{itemize}
% 		\item Find me in the kitchen.
% 		\item Please bring Dirk some beer.
% 		\item Find James and take him outside.
% 		\item Find someone in the bedroom and introduce yourself.
% 		\item Go to the entrance door, find a person and guide her to the kitchen.
% 	\end{itemize}

% 	\item \textbf{People following / guiding:} The ability to follow and guide people as described in the Navigation test (see \refsec{test:navigation})
% 	\begin{itemize}
% 		\item Follow me.
% 		\item Find James and take him outside.
% 		\item Go to the entrance door, find a person and guide her to the kitchen.
% 	\end{itemize}

% 	\item \textbf{Pour into a bowl:} The ability of pouring a fine-grained dry object (cereals, sugar, coffee, popcorn) and pour it into a bowl.
% 	\begin{itemize}
% 		\item Pour the flakes into the bowl and bring it to me.
% 		\item Bring me some oat, banana and milk in a tray.
% 	\end{itemize}

% 	\item \textbf{Memory and question answering:} The ability of remember changes in the environment and actions, answering questions when required.
% 	\begin{itemize}
% 		\item[C:] \textit{Please take the apples from the kitchen table to the dinner table}.
% 		\item[Q:] \textit{Bring me an apple}. (The robot must look for the apples in the dinner table). \\

% 		\item[C:] \textit{Bring this newspaper to John at the sofa}. (The sofa is in the living room).
% 		\begin{itemize}
% 		\item[Q:] \textit{Where is John?}
% 		\item[A:] \textit{John is in the living room}. \\

% 		\item[Q:] \textit{Who has the newspaper?}
% 		\item[A:] \textit{John has it}.
% 		\end{itemize}

% 		\item[C:] \textit{Give Dirk a beer}.
% 		\begin{itemize}
% 		\item[Q:] \textit{What did you just do?}
% 		\item[A:] \textit{I was asked to give Dirk a beer, but I couldn't find him}.
% 		\end{itemize}
% 	\end{itemize}

% 	\item \textbf{Unknown object description:} The ability of properly identifying and describing relevant features in unknown (and previously untrained) objects.

% \end{itemize}

% \section{Additional command examples}
% \begin{enumerate}
% 	\item Go to the kitchen.
% 	\item Go to the bedroom and wake up James.
% 	\item Bring me the newspaper.
% 	\item Give James the newspaper.
% 	\item Pour the cereals in the bowl.
% 	\item Go to James and answer his question.
% 	\item Tell me what items are in the bookcase.
% 	\item Guide me to the kitchen.
% 	\item This is James. Remember him.
% 	\item Follow me.
% 	\item Tell me how many people are in the kitchen.
% 	\item Tell me if the guest in the hallway is a boy or girl.
% 	\item Bring James a drink.
% 	\item Bring a coke to the person in the living room.
% 	\item Is there someone in the hallway?
% \end{enumerate}

% \subsection{A possible test execution}
% TODO
