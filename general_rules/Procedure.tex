%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Procedure during Tests}

\subsection{Safety First!}
\label{rule:safetyfirst}
\begin{enumerate}
	\item \textbf{Emergency Stop:} At any time when operating the robot inside and outside the scenario the owners have to stop the robot immediately if there is a remote possibility of dangerous behavior towards people and/or objects. 
	\item \textbf{Stopping on request:} If a referee, member of the Technical or Organizational committee, an Executive or Trustee of the federation tells the team to stop the robot, there will be no discussion and the robot has to be stopped \emph{immediately}.
	\item \textbf{Penalties:} If the team does not comply, the team and its members will be excluded from the ongoing competition immediately by a decision of the RoboCup@Home \iaterm{Technical Committee}{TC}. 	Furthermore, the team and its members may be banned from future competitions for a period not less than a year by a decision of the RoboCup Federation Trustee Board.
\end{enumerate}

\subsection{Maximum number of team members}
\label{rule:number_of_people}
\begin{enumerate}
	\item \textbf{Regular Tests:} During a regular test, the maximum number of team members allowed inside the arena is \emph{one} (1). The only exceptions are tests that require for more team members in the arena.
	\item \textbf{Setup:} During the setup of a test, the number of team members inside the arena is not limited.
	% \item \textbf{Open Demonstrations:} During the \iterm{Open Challenge} \iterm{Demo Challenge}, and the \iaterm{final demonstration}{Finals}, the number of team members inside the arena is not limited.
	\item \textbf{Open Demonstrations:} During the \iterm{Open Challenge}, and the \iaterm{final demonstration}{Finals}, the number of team members inside the arena is not limited. 
	\item \textbf{Moderation:} During a regular test, one team member \emph{must} be available to host and comment the event (see \refsec{rule:moderator}).
\end{enumerate}

\subsection{Fair play}
\label{rule:fairplay}
\iterm{Fair Play} and cooperative behavior is expected from all teams during the entire competition, in particular:
\begin{itemize}
	\item while evaluating other teams, 
	\item while refereeing, and 
	\item when having to interact with other teams' robots.  
\end{itemize}
This also includes:
\begin{itemize}
	\item not trying to cheat (e.g.~pretending autonomous behavior where there is none), 
	\item not trying to exploit the rules (e.g.~not trying to solve the task but trying to score), and 
	\item not trying to make other robots fail on purpose. 
\end{itemize}
Disregard of this rule can lead to penalties in the form of negative scores, and disqualification for a test or even for the entire competition. 

\subsection{Robot Autonomy and Remote Control}
\begin{enumerate}
	\item \textbf{No touching:} During a test, the participants are not allowed to make contact with the robot(s), unless it is in a \quotes{natural} way and/or required by the test specification. 
	\item \textbf{Natural interaction:} The only allowed means to interact with the robot(s) are gestures and speech.
	\item \textbf{Natural commands:} Only general instructions are allowed. 
	Anything that resembles direct control is prohibited.
	\item \textbf{Remote Control:} Remotely controlling the robot(s) is strictly prohibited. This also includes pressing buttons, or influencing sensors on purpose.
	\item \textbf{Penalties:} Disregard of these rules can lead to penalties in the form of negative scores, and disqualification for a test or even for the entire competition. 
\end{enumerate}

\subsection{Collisions}
\begin{enumerate}
	\item \textbf{\iterm{Touching}:} Robots are allowed to gently \emph{touch} objects, items and humans. 	They are not allowed to crash into something. The \quotes{safety first} rule (\refsec{rule:safetyfirst}) supercedes all other rules.
	\begin{itemize}
		\item It \emph{is} allowed however to \emph{functionally} touch an item with e.g.~the base.
	\end{itemize}
	The OC/TC/EC and the RoboCup Trustees all have the right to immediately stop a robot, and to disqualify a team for the duration of the competition, or longer, in case of \emph{dangerous} behavior. Furthermore, referees can recommend to disqualify a team in which case EC/TC decides.
	\item \textbf{\iterm{Major collisions}:} If a robot crushes into something during a test, the robot is immediately stopped.	Additional penalties may apply. 
	\item \textbf{Robot-Robot avoidance:} If two robots encounter each other, they both have to actively try to avoid the other robot.
	\begin{enumerate}
		\item A robot which is not going for a different route within a reasonable amount of time (e.g., \SI{30}{\second}) is removed.
		\item A non-moving robot blocking the path of another robot for longer than a reasonable amount of time (e.g., \SI{30}{\second}) is removed. In this context, \quotes{moving} refers to any kind of motion or action required in the test. For example, a robot standing still but manipulating an object does not need to stop manipulating and move away, even when blocking the way of another robot for the duration of the manipulation.
	\end{enumerate}
\end{enumerate}



\subsection{Removal of robots}
\label{rule:robot_removal}
Robots not obeying the rules are stopped and removed from the arena.
\begin{enumerate}
	\item It is the decision of the referees and the TC member monitoring the test if and when to remove a robot.
	\item When told to do so by the referees or the TC member monitoring the test, the team has to immediately stop the robot, and remove it from the arena without disturbing the ongoing test.
\end{enumerate}


\subsection{Start signal}
\label{rule:start_signal}

\begin{enumerate}
	\item \textbf{Opening the door:} Unless stated otherwise, the cue for the robot to enter the arena and start the test is the opening of the door by a referee.
	\item \textbf{Start button:} If the robot is not able to automatically start after opening the door, the team may start the robot using a start button. 
	\begin{enumerate}
		\item Using a start button needs to be announced to the referees. It is the responsibility of the team to do so before the test starts.
		\item There may be penalties for using a start button in some tests
	\end{enumerate}
\end{enumerate}


\subsection{Entering and leaving the arena}
\label{rule:start_position}
\begin{enumerate}
	\item \textbf{Start position:} Unless stated otherwise, the robot starts outside of the arena.
	\item \textbf{Entering:} The robot has to autonomously enter the arena.
	\item \textbf{Success:} The robot is said to \emph{have entered} when the door used to enter can be closed again, and the robot is not blocking the passage.
\end{enumerate}



\subsection{Gestures}
\label{rule:gestures}
Hand gestures may be used to control the robot in the following way:
\begin{enumerate}
	\item \textbf{Definition:} The teams define the hand gestures by themselves. 
	\item \textbf{Approval:} Gestures need to be approved by the referees and TC member monitoring the test. Gestures should not involve more than the movement of both arms. This includes e.g.~expressions of sign language or pointing gestures.
	\item \textbf{Instructing operators:} It is the responsibility of the team to instruct operators.
	\begin{enumerate}
		\item The team may only instruct the operator when told to so by a referee.
		\item The team may only instruct the operator in the presence of a referee.
		\item The team may only instruct the robot for as long as allowed by the referee.
		\item When the robot has to instruct the operator, it is the robot that instructs the operator and \emph{not} the team. The team is not allowed to additionally guide the operator, e.g., tell the operator to come closer, speak louder, or to repeat a command.
		\item The robot is allows to instruct the operator at any time.
	\end{enumerate}
	\item \textbf{Receiving gestures:} Unless stated otherwise, it is not allowed to use a speech command to set the robot into a special mode for receiving gestures.
\end{enumerate}



\subsection{Referees}
\label{rule:referees}
% \refmark{}
\begin{enumerate}
	\item \textbf{Setup:} Unless stated otherwise, each test is monitored by two referees and one member of the \iaterm{Technical Committee}{TC}.
	\item \textbf{Selection:} The two referees 
	\begin{itemize}
		\item are chosen by EC/TC/OC, 
		\item are announced together with the schedule for the test slot, 
		\item and have to referee all teams in that slot.
		\item Referees may not be from one of the teams in the slot.
	\end{itemize}
	\item \textbf{Not showing up:} Not showing up for refereeing (on time) will result in a penalty (see \refsec{rule:extraordinary_penalties}). 
	\item \textbf{TC monitoring:} The referee from the TC acts as a main referee. 
	\item \textbf{Referee instructions:} Right before each test, referee instructions are conducted by the TC. The referees for all slots need to be present at the arena where the referee instructions are taking place.When and where referee instructions are taking place is announced together with the schedule for the slots.
\end{enumerate}


\subsection{Operator}
\label{rule:operator}
\begin{enumerate}
	\item \textbf{Default operator:} Unless stated otherwise, robots are operated by the monitoring TC member, a referee, or by a person selected by the TC.
	\item \textbf{Fallback/custom operator:} If the robot fails to understand the command given by the default operator, the team may continue with a custom operator.
	\begin{compactitem}
		\item The custom operator may be any person chosen by the team (and willing to do so); including the referees or the monitoring TC member. 
		\item A penalty may be involved when using a custom operator.
	\end{compactitem}
\end{enumerate}



\subsection{Moderator}
\label{rule:moderator}
\begin{enumerate}
	\item \textbf{Providing a moderator:} For each regular test (i.e., not for the open demonstrations), all participating teams need to provide a team member as moderator for the duration of their performance. 
	\item \textbf{Responsibilities:} The moderators have to:
	\begin{compactitem}
		\item explain the rules of the test, 
		\item comment on the performance of their team, 
		\item not interfere with the performance, 
		\item speak in English, 
		\item and obey the instructions by the monitoring TC member.
	\end{compactitem}
	\item \textbf{Competitive tests:} In competitive tests (tests in which two teams directly compete against each other), the moderation has to be done by the two teams together.
\end{enumerate}


\subsection{Time limits}
\label{rule:time_limits}
\begin{enumerate}
	\item \textbf{Stage~I:} Unless stated otherwise, the time limit for each test in \iterm{Stage~I} is \timing{5 minutes}.
	\item \textbf{Stage~II:} Unless stated otherwise, the time limit for each test in \iterm{Stage~II} is \timing{10 minutes}.
	\item \textbf{Setup time:} Unless stated otherwise, all time specifications, e.g., setup time and time for instructing operators, are within the total test time. 
	\item \textbf{Scores:} When the time is up, the team has to immediately remove their robot(s) from the arena; no more points can be scored. In special cases, the monitoring TC member may ask the team to continue the test for demonstration purposes (after time is up, points cannot be scored). 
\end{enumerate}



\subsection{Restart}
\label{rule:restart}
\begin{enumerate}
	\item \textbf{Stage 1} has no restarts but features multiple attempts at a challenge. 
	If a robot fails during an attempt, the attempt ends. 
	A robot has several (ideally 3, depending on available time in the scheduele) attempts for each challenge. An attempt cannot be restarted. 
	E.g. if a robot fails halfway through an attempt at the navigation challenge, the attempt is over, the robot is moved out of the test area and may prepare for the remaining attempts at the challenge.

	\item \textbf{Stage 2} does have restarts for challenges:
	\begin{enumerate}
		\item \textbf{Number of restarts:} A team may request one (1) restart during a test, unless stated in otherwise. There are tests in which a restart is not allowed.
		\item \textbf{Procedure:} In case a restart is allowed, the team may request the restart only before 50\% of the time alloted to the test. The complete test is then restarted from the beginning (e.g., with entering the arena). The referees may rearrange the locations of objects/persons if necessary.
		\item \textbf{Time:} The time is neither restarted nor stopped. The team has 1 minute to restart the test (the same time to start the test); if the team is not able to do so in the allotted time, the test is called as finished by the TC.
		\item \textbf{Score:} The score of the second run (after the restart) counts. If it is lower than the score of the first run (before the restart), the average score of first and second run is taken.
		\item \textbf{Forced restart:} The referees and the monitoring TC member may force the team to do a restart:
		\begin{compactitem}
			\item if the robot is doing nothing or nothing reasonable for \timing{one minute}, or
			\item when the robot fails to understand a command for \timing{five times}, or
			\item after a minor collision
		\end{compactitem}  
	\end{enumerate}
\end{enumerate}


\subsection{Continue rule: Bypassing Automatic Speech Recognition}
\label{rule:asrcontinue}

Giving commands to the robot is an important part of many tests. 
RoboCup@Home fosters natural human-robot interaction through gestures and speech, such that speech is the primary modality to give complex commands to the robot. 
Automatic speech recognition (ASR) however can be very difficult in the international competition environment of RoboCup. 
Because active robots are preferred over robots that are passive due to failing ASR, 
  the team is allowed to provide means to bypass ASR. 
The robot can then still continue to a next part of a test, but with a penalty for needing a bypass. 
The penalty for using such a bypass will be more severe in future competitions.

All robots are \textbf{highly recommended to use QR-codes as a standardized alternative} to ASR. These QR-codes will be generated by the TC to encode the spoken command/sentence as-is. 
Any punctuation like commas, questionmarks, apostrophes and dots in the (generated) spoken command will also be present in the QR-code. 

Non-standardized alternative means should be
  % declared in the registration form and
  approved by and demonstrated to the TC during the \iterm{Robot Inspection} test (see \refsec{sec:robot_inspection}).

\subsubsection{Procedure}
Automatic Speech Recognition is preferred and any command given to the robot will given by voice first.
\begin{enumerate}
\item \textbf{Default:} When the referee generates a command for the robot, it will be read out loud by the operator to the robot. 100\% of the points gained in the execution of the command will be awarded.
\item \textbf{team member: } If this fails, a team member may speak the command to the robot if this was not the case already.  75\% of the points gained in the execution of the command will be awarded, if not stated otherwise.
\item \textbf{QR-code:} If this fails as well, as a last resort, a QR-code will be generated that encodes the command as plain text and shown to the robot, displayed on either a piece of paper or a computer screen. 90\% of the total points for command execution will be awarded if a QR-code was necessary. 
      For some examples, see refsec{chap:qr-code-examples}.
\end{enumerate}

\begin{enumerate}
	\item \textbf{Number of Continue's:} Unless stated otherwise, the referee chooses to apply and initate the steps of the procedure listed above.
	\item \textbf{Time:} The time is neither restarted nor stopped while the Continue rule is applied.
	\item \textbf{Multiple Continue's:} The Continue rule will applied by the referee as often as required to make the robot be active. The penalty involved makes this unpreferable to the team and the usage should not be preferred, incentivizing the team to provide a proper means of ASR.
\end{enumerate}


\subsubsection{Alternative methods}
Below are some suggested alternatives for ASR besides the QR-code as specified above:
\begin{itemize}
	\item Any custom alternative that MUST be intuitive and intended for users with no technological expertise.
 	% \item Plug in an USB keyboard
 	\item Other types of natural interaction such as gestures.
 	\item A touch-sensitive designed interface.
	\item The robot hosts a website/app on which some text can be entered.
	% \item A laptop connects to the robot over e.g.~ssh where some command can be entered. 
\end{itemize}

The default penalties for ASR alternative methods will be decided on by the TC, during the \iterm{Robot Inspection} test (see \refsec{sec:robot_inspection}).
Operating the robot in a very user-friendly way via whatever manner may yield a significant amount of points more than using an user-unfriendly way such as the QR codes. 

What a good custom ASR alternative is loosely defined on purpose: be creative. Consider who may use a service robot, why they might want/need such a robot and what this means for how they might operate a service robot.

\paragraph*{Remark:} Plug-in external devices (keyboard/computer), typing commands in terminal (ssh, rostopic), and complex interfaces will not be allowed. User interfaces MUST be in English (multi-language GUI are allowed).

% Local Variables:
% TeX-master: "../Rulebook"
% End:
