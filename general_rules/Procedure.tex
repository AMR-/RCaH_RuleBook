%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Procedure during Tests}

\subsection{Safety First!}
\label{rule:safetyfirst}
\begin{enumerate}
	\item \textbf{Emergency Stop:} At any time when operating the robot inside and outside the scenario the owners have to stop the robot immediately if there is a remote possibility of dangerous behavior towards people and/or objects. 
	\item \textbf{Stopping on request:} If a referee, member of the Technical or Organizational committee, an Executive or Trustee of the federation tells the team to stop the robot, there will be no discussion and the robot has to be stopped \emph{immediately}.
	\item \textbf{Penalties:} If the team does not comply, the team and its members will be excluded from the ongoing competition immediately by a decision of the RoboCup@Home \iaterm{Technical Committee}{TC}. 	Furthermore, the team and its members may be banned from future competitions for a period not less than a year by a decision of the RoboCup Federation Trustee Board.
\end{enumerate}

\subsection{Maximum number of team members}
\label{rule:number_of_people}
\begin{enumerate}
	\item \textbf{Regular Tests:} During a regular test, the maximum number of team members allowed inside the arena is \emph{one} (1). The only exceptions are tests that require for more team members in the arena.
	\item \textbf{Setup:} During the setup of a test, the number of team members inside the arena is not limited.
	% \item \textbf{Open Demonstrations:} During the \iterm{Open Challenge} \iterm{Demo Challenge}, and the \iaterm{final demonstration}{Finals}, the number of team members inside the arena is not limited.
	\item \textbf{Open Demonstrations:} During the \iterm{Open Challenge}, and the \iaterm{final demonstration}{Finals}, the number of team members inside the arena is not limited. 
	\item \textbf{Moderation:} During a regular test, one team member \emph{must} be available to host and comment the event (see \refsec{rule:moderator}).
\end{enumerate}

\subsection{Fair play}
\label{rule:fairplay}
\iterm{Fair Play} and cooperative behavior is expected from all teams during the entire competition, in particular:
\begin{itemize}
	\item while evaluating other teams, 
	\item while refereeing, and 
	\item when having to interact with other teams' robots.  
\end{itemize}
This also includes:
\begin{itemize}
	\item not trying to cheat (e.g.~pretending autonomous behavior where there is none), 
	\item not trying to exploit the rules (e.g.~not trying to solve the task but trying to score), and 
	\item not trying to make other robots fail on purpose. 
\end{itemize}
Disregard of this rule can lead to penalties in the form of negative scores, and disqualification for a test or even for the entire competition. 

\subsection{Robot Autonomy and Remote Control}
\begin{enumerate}
	\item \textbf{No touching:} During a test, the participants are not allowed to make contact with the robot(s), unless it is in a \quotes{natural} way and/or required by the test specification. 
	\item \textbf{Natural interaction:} The only allowed means to interact with the robot(s) are gestures and speech.
	\item \textbf{Natural commands:} Only general instructions are allowed. 
	Anything that resembles direct control is prohibited.
	\item \textbf{Remote Control:} Remotely controlling the robot(s) is strictly prohibited. This also includes pressing buttons, or influencing sensors on purpose.
	\item \textbf{Penalties:} Disregard of these rules can lead to penalties in the form of negative scores, and disqualification for a test or even for the entire competition. 
\end{enumerate}

\subsection{Collisions}
\begin{enumerate}
	\item \textbf{\iterm{Touching}:} Robots are allowed to gently \emph{touch} objects, items and humans. 	They are not allowed to crash into something. The \quotes{safety first} rule (\refsec{rule:safetyfirst}) supercedes all other rules.
	\begin{itemize}
		\item It \emph{is} allowed however to \emph{functionally} touch an item with e.g.~the base.
	\end{itemize}
	The OC/TC/EC and the RoboCup Trustees all have the right to immediately stop a robot, and to disqualify a team for the duration of the competition, or longer, in case of \emph{dangerous} behavior. Furthermore, referees can recommend to disqualify a team in which case EC/TC decides.
	\item \textbf{\iterm{Major collisions}:} If a robot crushes into something during a test, the robot is immediately stopped.	Additional penalties may apply. 
	\item \textbf{Robot-Robot avoidance:} If two robots encounter each other, they both have to actively try to avoid the other robot.
	\begin{enumerate}
		\item A robot which is not going for a different route within a reasonable amount of time (e.g., \SI{30}{\second}) is removed.
		\item A non-moving robot blocking the path of another robot for longer than a reasonable amount of time (e.g., \SI{30}{\second}) is removed. In this context, \quotes{moving} refers to any kind of motion or action required in the test. For example, a robot standing still but manipulating an object does not need to stop manipulating and move away, even when blocking the way of another robot for the duration of the manipulation.
	\end{enumerate}
\end{enumerate}



\subsection{Removal of robots}
\label{rule:robot_removal}
Robots not obeying the rules are stopped and removed from the arena.
\begin{enumerate}
	\item It is the decision of the referees and the TC member monitoring the test if and when to remove a robot.
	\item When told to do so by the referees or the TC member monitoring the test, the team has to immediately stop the robot, and remove it from the arena without disturbing the ongoing test.
\end{enumerate}


\subsection{Start signal}
\label{rule:start_signal}

\begin{enumerate}
	\item \textbf{Opening the door:} Unless stated otherwise, the cue for the robot to enter the arena and start the test is the opening of the door by a referee.
	\item \textbf{Start button:} If the robot is not able to automatically start after opening the door, the team may start the robot using a start button. 
	\begin{enumerate}
		\item Using a start button needs to be announced to the referees. It is the responsibility of the team to do so before the test starts.
		\item There may be penalties for using a start button in some tests
	\end{enumerate}
\end{enumerate}


\subsection{Entering and leaving the arena}
\label{rule:start_position}
\begin{enumerate}
	\item \textbf{Start position:} Unless stated otherwise, the robot starts outside of the arena.
	\item \textbf{Entering:} The robot has to autonomously enter the arena.
	\item \textbf{Success:} The robot is said to \emph{have entered} when the door used to enter can be closed again, and the robot is not blocking the passage.
\end{enumerate}



\subsection{Gestures}
\label{rule:gestures}
Hand gestures may be used to control the robot in the following way:
\begin{enumerate}
	\item \textbf{Definition:} The teams define the hand gestures by themselves. 
	\item \textbf{Approval:} Gestures need to be approved by the referees and TC member monitoring the test. Gestures should not involve more than the movement of both arms. This includes e.g.~expressions of sign language or pointing gestures.
	\item \textbf{Instructing operators:} It is the responsibility of the team to instruct operators.
	\begin{enumerate}
		\item The team may only instruct the operator when told to so by a referee.
		\item The team may only instruct the operator in the presence of a referee.
		\item The team may only instruct the robot for as long as allowed by the referee.
		\item When the robot has to instruct the operator, it is the robot that instructs the operator and \emph{not} the team. The team is not allowed to additionally guide the operator, e.g., tell the operator to come closer, speak louder, or to repeat a command.
		\item The robot is allows to instruct the operator at any time.
	\end{enumerate}
	\item \textbf{Receiving gestures:} Unless stated otherwise, it is not allowed to use a speech command to set the robot into a special mode for receiving gestures.
\end{enumerate}



\subsection{Referees}
\label{rule:referees}
% \refmark{}
\begin{enumerate}
	\item \textbf{Setup:} Unless stated otherwise, each test is monitored by two referees and one member of the \iaterm{Technical Committee}{TC}.
	\item \textbf{Selection:} The two referees 
	\begin{itemize}
		\item are chosen by EC/TC/OC, 
		\item are announced together with the schedule for the test slot, 
		\item and have to referee all teams in that slot.
		\item Referees may not be from one of the teams in the slot.
	\end{itemize}
	\item \textbf{Not showing up:} Not showing up for refereeing (on time) will result in a penalty (see \refsec{rule:extraordinary_penalties}). 
	\item \textbf{TC monitoring:} The referee from the TC acts as a main referee. 
	\item \textbf{Referee instructions:} Right before each test, referee instructions are conducted by the TC. The referees for all slots need to be present at the arena where the referee instructions are taking place.When and where referee instructions are taking place is announced together with the schedule for the slots.
\end{enumerate}


\subsection{Operator}
\label{rule:operator}
\begin{enumerate}
	\item \textbf{Default operator:} Unless stated otherwise, robots are operated by the monitoring TC member, a referee, or by a person selected by the TC.
	\item \textbf{Fallback/custom operator:} If the robot fails to understand the command given by the default operator, the team may continue with a custom operator.
	\begin{compactitem}
		\item The custom operator may be any person chosen by the team (and willing to do so); including the referees or the monitoring TC member. 
		\item A penalty may be involved when using a custom operator.
	\end{compactitem}
\end{enumerate}



\subsection{Moderator}
\label{rule:moderator}
\begin{enumerate}
	\item \textbf{Providing a moderator:} For each regular test (i.e., not for the open demonstrations), all participating teams need to provide a team member as moderator for the duration of their performance. 
	\item \textbf{Responsibilities:} The moderators have to:
	\begin{compactitem}
		\item explain the rules of the test, 
		\item comment on the performance of their team, 
		\item not interfere with the performance, 
		\item speak in English, 
		\item and obey the instructions by the monitoring TC member.
	\end{compactitem}
	\item \textbf{Competitive tests:} In competitive tests (tests in which two teams directly compete against each other), the moderation has to be done by the two teams together.
\end{enumerate}


\subsection{Time limits}
\label{rule:time_limits}
\begin{enumerate}
	\item \textbf{Stage~I:} Unless stated otherwise, the time limit for each test in \iterm{Stage~I} is \timing{5 minutes}.
	\item \textbf{Stage~II:} Unless stated otherwise, the time limit for each test in \iterm{Stage~II} is \timing{10 minutes}.
	\item \textbf{Setup time:} Unless stated otherwise, all time specifications, e.g., setup time and time for instructing operators, are within the total test time. 
	\item \textbf{Scores:} When the time is up, the team has to immediately remove their robot(s) from the arena; no more points can be scored. In special cases, the monitoring TC member may ask the team to continue the test for demonstration purposes (after time is up, points cannot be scored). 
\end{enumerate}



\subsection{Restart}
\label{rule:restart}
\begin{enumerate}
	\item \textbf{Stage 1} has no restarts but features multiple attempts at a challenge. 
	If a robot fails during an attempt, the attempt ends. 
	A robot has several (ideally 3, depending on available time in the scheduele) attempts for each challenge. An attempt cannot be restarted. 
	E.g. if a robot fails halfway through an attempt at the navigation challenge, the attempt is over, the robot is moved out of the test area and may prepare for the remaining attempts at the challenge.

	\item \textbf{Stage 2} does have restarts for challenges:
	\begin{enumerate}
		\item \textbf{Number of restarts:} A team may request one (1) restart during a test, unless stated in otherwise. There are tests in which a restart is not allowed.
		\item \textbf{Procedure:} In case a restart is allowed, the team may request the restart only before 50\% of the time alloted to the test. The complete test is then restarted from the beginning (e.g., with entering the arena). The referees may rearrange the locations of objects/persons if necessary.
		\item \textbf{Time:} The time is neither restarted nor stopped. The team has 1 minute to restart the test (the same time to start the test); if the team is not able to do so in the allotted time, the test is called as finished by the TC.
		\item \textbf{Score:} The score of the second run (after the restart) counts. If it is lower than the score of the first run (before the restart), the average score of first and second run is taken.
		\item \textbf{Forced restart:} The referees and the monitoring TC member may force the team to do a restart:
		\begin{compactitem}
			\item if the robot is doing nothing or nothing reasonable for \timing{one minute}, or
			\item when the robot fails to understand a command for \timing{five times}, or
			\item after a minor collision
		\end{compactitem}  
	\end{enumerate}
\end{enumerate}


\subsection{Bypassing Automatic Speech Recognition: Continue}
\label{rule:asrcontinue}

Giving commands to the robot is an important part of many tests. RoboCup@Home fosters natural human-robot interaction through gestures and speech, such that speech is the primary modality to give complex commands to the robot. Due to the sequential nature of many tests and the difficulty of ASR in the international competition environment of RoboCup, the team is allowed to take up to 2 alternative means to provide a command to the robot, for which the robot continuously fails to recognize the spoken command. These alternative means should be
% declared in the registration form and
approved by the TC during the \iterm{Robot Inspection} test (see \refsec{sec:robot_inspection}).

In future competitions, this rule will be gradually removed. Hence, solutions are encouraged that either resolve the ASR failure through spoken dialogs or solving the task in an alternative way (no penalty), or that use appealing modalities to provide the command (less penalty than direct typing on the robot).

\begin{enumerate}
	\item \textbf{Number of Continue's:} Unless stated otherwise, the team leader may request up to two (2) Continue's during a test. 
	\item \textbf{Procedure:} In case a Continue is allowed, the team may request the Continue only at moments in which the robot is failing at carrying out ASR (no pre-emptive Continue's are allowed). A TC member gives the command through the alternative input modality. S/he provides exactly what the user has spoken. The Continue rule will not be allowed, if the robot does not have a keyboard attached or the alternative input modality was not accepted by the TC, or if it is not able to process ASR commands and alternative commands simultaneously.
	\item \textbf{Time:} The time is neither restarted nor stopped while the Continue rule is applied.
	\item \textbf{Score:} If one Continue was asked for, the points provided for the ASR part of the test (if any) will be zero and the total points for the test will be multiplied by a factor of 0.5 if the modality of the alternative solution is by typing on a keyboard. To promote other means of interaction, if the modality is different than keyboard typing (i.e.~touch interface), the factor to be applied will be 0.75. If two Continues were asked for, the factor will be applied twice.
\end{enumerate}

\subsubsection{Custom intuitive alternative}
\label{rule:asr_alternative}
Teams are encouraged to create a custom alternative to Automatic Speech Recognition to give the robot commands. 
The ASR alternative has a single, loosly defined constraint:
\begin{itemize}
 \item Intuitive to the intended users of service robots, which may be non-experts in technology. 
\end{itemize}

This loosly defined on purpose: be creative.
Consider who may use a service robot, why they might want/need such a robot and what this means for how they might operate a service robot. 

% Local Variables:
% TeX-master: "../Rulebook"
% End:
